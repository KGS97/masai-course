<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search</title>
    <link rel="stylesheet" href="/styles/styles.css" />
  </head>
  <body>
    <div id="navbar"></div>
    <div id="searchbar">
      <input type="text" id="searchBox" />
      <button id="search-btn">Search</button>
    </div>

    <div id="recipe"></div>
  </body>
</html>

<script type="module">
  //importing start
  import navbar from "/components/navbar.js";
  import searchWithD from "./utils/searchWithD.js";
  import fetchData from "./utils/fetchData.js";
  //importing end

  document.getElementById("search-btn").addEventListener("click", () => {
    let search = document.getElementById("searchBox").value;
    let url = "https://www.themealdb.com/api/json/v1/1/search.php?s=" + search;
    fetchData("search", url);
  });

  document.getElementById("navbar").innerHTML = navbar();
  let logIn = JSON.parse(localStorage.getItem("logIn")) || false;
  if (!logIn) {
    let login = document.createElement("a");
    login.href = "html/logIn.html";
    let h4 = document.createElement("h4");
    h4.innerText = "Log In";
    login.append(h4);
    document.getElementById("nav").append(login);
  } else {
    let h4 = document.createElement("h4");
    h4.innerText = JSON.parse(localStorage.getItem("userName"));
    document.getElementById("nav").append(h4);
  }
</script>
